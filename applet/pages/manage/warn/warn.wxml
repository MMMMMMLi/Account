<import src="/template/footer/footer.wxml" />

<view class="page">
<!-- 搜索框 -->
	<view class="{{ inputVal.length > 0 ? 'mask' : '' }}">
		<view class="weui-search-bar {{inputShowed ? 'weui-search-bar_focusing' : ''}}" id="searchBar">
			<form class="weui-search-bar__form">
				<label class="weui-search-bar__label" bindtap="showInput">
					<i class="weui-icon-search"></i>
					<span class="weui-search-bar__text">搜索</span>
				</label>
				<view class="weui-search-bar__box">
					<i class="weui-icon-search"></i>
					<input type="text" class="weui-search-bar__input" confirm-type="search" placeholder="支持输入姓名/拼音/手机号；至多展示20位" value="{{inputVal}}" focus="{{inputShowed}}" bindinput="inputTyping" />
					<span class="weui-icon-clear" wx:if="{{inputVal.length > 0}}" bindtap="clearInput"></span>
				</view>
			</form>
			<view class="weui-search-bar__cancel-btn" bindtap="hideInput">取消</view>
		</view>
	</view>
	<!-- 排序框 -->
	<view class="button-sp-area">
		<a class="weui-btn weui-btn_mini {{clickButton == 'money' ? 'weui-btn_primary':' weui-btn_default'}}" data-value="money" bindtap="clickButton">昨 天</a>
		<a class="weui-btn weui-btn_mini {{clickButton == 'orders' ? 'weui-btn_primary':' weui-btn_default'}}" data-value="orders" bindtap="clickButton">三 天</a>
		<a class="weui-btn weui-btn_mini {{clickButton == 'time' ? 'weui-btn_primary':' weui-btn_default'}}" data-value="time" bindtap="clickButton">一 周</a>
		<a class="weui-btn weui-btn_mini weui-btn_warn" bindtap="addUser">总次数</a>
	</view>
	<!-- 列表 -->
	<view class="page__bd">
		<scroll-view scroll-y>
			<view wx:for="{{userList}}" wx:key="id" class="weui-cells weui-cells_after-title">
				<navigator url="./detail/detail?userId={{item.id}}&orders={{item.orders}}&money={{item.money}}" class="weui-cell weui-cell_access" hover-class="weui-cell_active">
					<view class="weui-cell__hd">
						<image src="{{item.avatarUrl}}" style="margin-right: 16px;vertical-align: middle;width:20px; height: 20px;"></image>
					</view>
					<view class="weui-cell__bd">{{item.userName}}</view>
					<view class="weui-cell__ft weui-cell__ft_in-access">{{clickButton == 'money' ? '￥ ':''}}{{item.showInfo}}{{clickButton == 'orders' ? ' 笔':''}}</view>
				</navigator>
			</view>
			<view wx:if="{{!hasNextPage}}" class="weui-loadmore weui-loadmore_line">
			<text class="weui-loadmore__tips">暂无更多数据</text>
		</view>
		</scroll-view>
	</view>
	<template is="footer" />
</view>